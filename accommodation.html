<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ä½å®¿é¢„è®¢ | Accommodation - Semporna Tours</title>
    <link rel="stylesheet" href="style.css">
    <style>
        section { max-width: 1100px; margin: auto; padding: 40px 20px; }
        
        .room-card {
            background: var(--card);
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            margin-bottom: 50px;
            display: flex;
            flex-direction: column;
        }

        .slider-container {
            position: relative;
            width: 100%;
            height: 400px;
            overflow: hidden;
            background: #eee;
        }
        .slider-track {
            display: flex;
            transition: transform 0.5s ease-in-out;
            height: 100%;
        }
        .slider-track img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            flex-shrink: 0;
        }
        .slider-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0,0,0,0.5);
            color: #fff;
            border: none;
            padding: 15px;
            cursor: pointer;
            z-index: 10;
            border-radius: 50%;
            margin: 0 10px;
        }
        .btn-next { right: 0; }
        .btn-prev { left: 0; }

        .room-info { padding: 30px; }
        .room-info h2 { color: var(--main); margin-top: 0; }
        .room-info p { color: #555; line-height: 1.8; margin-bottom: 20px; }
        
        /* Availability Checker Styles */
        .check-box {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 12px;
            margin: 20px 0;
            border: 1px solid #eee;
        }
        .check-flex {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        .date-input {
            padding: 10px;
            border: 1px solid var(--main);
            border-radius: 8px;
            flex: 1;
            font-family: inherit;
        }
        .status-tag {
            display: inline-block;
            margin-top: 12px;
            font-weight: 700;
            padding: 6px 14px;
            border-radius: 6px;
            font-size: 0.9rem;
        }
        .status-available { background: #e6fffa; color: #234e52; border: 1px solid #38b2ac; }
        .status-full { background: #fff5f5; color: #9b2c2c; border: 1px solid #feb2b2; }

        .amenity-tag {
            background: #f0fbfc;
            color: var(--main);
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.85rem;
            margin-right: 5px;
        }

        .calendar-wrapper {
            position: relative;
            padding-bottom: 75%;
            height: 0;
            overflow: hidden;
            border-radius: var(--radius);
        }
        .calendar-wrapper iframe {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
        }

        @media (max-width: 768px) {
            .slider-container { height: 250px; }
            .check-flex { flex-direction: column; }
        }
    </style>
</head>
<body>

<header>
    <nav class="nav-container">
        <a href="index.html" class="logo-box">
            <img src="images/logo.png" alt="Semporna Tours" class="site-logo">
        </a>
        <div class="nav-links">
            <a href="index.html">é¦–é¡µ / Home</a>
            <a href="pricing.html">ä»·æ ¼ / Pricing</a>
            <a href="accommodation.html" class="active">ä½å®¿ / Accommodation</a>
            <a href="gallery.html">ç›¸å†Œ / Gallery</a>
            <a href="about.html">å…³äº / About</a>
            <button id="langToggleDesktop" class="lang-btn">ğŸ‡¨ğŸ‡³ / ğŸ‡¬ğŸ‡§</button>
        </div>
        <button class="hamburger" id="hamburger">&#9776;</button>
    </nav>
</header>

<section>
    <div class="room-card">
        <div class="slider-container" id="slider1">
            <div class="slider-track">
                <img src="images/accommodation/Standard room/8a80818a9a983c42019a9b18356d15bb_300702.jpg">
                <img src="images/accommodation/Standard room/8a80818a9a983c42019a9b18356d15bb_46071.jpg">
                <img src="images/accommodation/Standard room/8a80818a9a983c42019a9b18356d15bb_486768.jpg">
                <img src="images/accommodation/Standard room/8a80818a9a983c42019a9b18356d15bb_627780.jpg">
            </div>
            <button class="slider-btn btn-prev" onclick="moveSlide('slider1', -1)">&#10094;</button>
            <button class="slider-btn btn-next" onclick="moveSlide('slider1', 1)">&#10095;</button>
        </div>
        <div class="room-info">
            <h2 class="cn">æ ‡å‡†é—´ (æ— æµ·æ™¯)</h2>
            <h2 class="en hidden">Standard Room</h2>
            <div class="check-box">
                <label class="cn">æ£€æŸ¥æ­¤æˆ¿å‹å¯ç”¨æ—¥æœŸï¼š</label>
                <label class="en hidden">Check Available Dates:</label>
                <div class="check-flex">
                    <input type="date" class="date-input" id="date1">
                    <button onclick="checkDate('date1', 'res1')" class="btn-about" style="margin:0;">Check</button>
                </div>
                <div id="res1" class="status-tag" style="display:none;"></div>
            </div>
            <button onclick="openWechat()" class="btn-about" style="width:100%; background:var(--main); color:#fff; border:none;">ç«‹å³å’¨è¯¢ / Inquire Now</button>
        </div>
    </div>

    <div class="room-card">
        <div class="slider-container" id="slider2">
            <div class="slider-track">
                <img src="images/accommodation/Detached Ocean View Room/Detached Ocean View Room 1.jpg">
                <img src="images/accommodation/Detached Ocean View Room/Detached Ocean View Room 2.jpg">
                <img src="images/accommodation/Detached Ocean View Room/Detached Ocean View Room 3.jpg">
            </div>
            <button class="slider-btn btn-prev" onclick="moveSlide('slider2', -1)">&#10094;</button>
            <button class="slider-btn btn-next" onclick="moveSlide('slider2', 1)">&#10095;</button>
        </div>
        <div class="room-info">
            <h2 class="cn">ç‹¬ç«‹æµ·æ™¯æˆ¿</h2>
            <h2 class="en hidden">Detached Ocean View Room</h2>
            <div class="check-box">
                <div class="check-flex">
                    <input type="date" class="date-input" id="date2">
                    <button onclick="checkDate('date2', 'res2')" class="btn-about" style="margin:0;">Check</button>
                </div>
                <div id="res2" class="status-tag" style="display:none;"></div>
            </div>
            <button onclick="openWechat()" class="btn-about" style="width:100%; background:var(--main); color:#fff; border:none;">ç«‹å³å’¨è¯¢ / Inquire Now</button>
        </div>
    </div>

    <div class="room-card">
        <div class="slider-container" id="slider3">
            <div class="slider-track">
                <img src="images/accommodation/Ocean view room/8a80818a9392f1f5019394dd1d654120_449246.jpg">
                <img src="images/accommodation/Ocean view room/8a80818a9392f1f5019394dd1d654120_534811.jpg">
            </div>
            <button class="slider-btn btn-prev" onclick="moveSlide('slider3', -1)">&#10094;</button>
            <button class="slider-btn btn-next" onclick="moveSlide('slider3', 1)">&#10095;</button>
        </div>
        <div class="room-info">
            <h2 class="cn">è±ªåæµ·æ™¯é˜³å°æˆ¿ (å¤§åºŠ)</h2>
            <h2 class="en hidden">Ocean View Room (Balcony)</h2>
            <div class="check-box">
                <div class="check-flex">
                    <input type="date" class="date-input" id="date3">
                    <button onclick="checkDate('date3', 'res3')" class="btn-about" style="margin:0;">Check</button>
                </div>
                <div id="res3" class="status-tag" style="display:none;"></div>
            </div>
            <button onclick="openWechat()" class="btn-about" style="width:100%; background:var(--main); color:#fff; border:none;">ç«‹å³å’¨è¯¢ / Inquire Now</button>
        </div>
    </div>

    <div class="room-card">
        <div class="slider-container" id="slider4">
            <div class="slider-track">
                <img src="images/accommodation/Ocean View Twin Room/8a80818a9418d64501941b6475e034a0_144557.jpg">
                <img src="images/accommodation/Ocean View Twin Room/8a80818a9418d64501941b6475e034a0_43838.jpg">
            </div>
            <button class="slider-btn btn-prev" onclick="moveSlide('slider4', -1)">&#10094;</button>
            <button class="slider-btn btn-next" onclick="moveSlide('slider4', 1)">&#10095;</button>
        </div>
        <div class="room-info">
            <h2 class="cn">è±ªåæµ·æ™¯é˜³å°æˆ¿ (åŒåºŠ)</h2>
            <h2 class="en hidden">Ocean View Twin Room</h2>
            <div class="check-box">
                <div class="check-flex">
                    <input type="date" class="date-input" id="date4">
                    <button onclick="checkDate('date4', 'res4')" class="btn-about" style="margin:0;">Check</button>
                </div>
                <div id="res4" class="status-tag" style="display:none;"></div>
            </div>
            <button onclick="openWechat()" class="btn-about" style="width:100%; background:var(--main); color:#fff; border:none;">ç«‹å³å’¨è¯¢ / Inquire Now</button>
        </div>
    </div>

    <div class="calendar-section" style="text-align:center; padding:40px 0;">
        <h2 class="cn">å…¨æ™¯æˆ¿æ€å›¾</h2>
        <h2 class="en hidden">Overall Availability</h2>
        <div class="calendar-wrapper">
            <iframe src="https://calendar.google.com/calendar/embed?src=desmondmaker%40gmail.com&ctz=Asia%2FKuala_Lumpur" style="border:0" width="100%" height="600" frameborder="0" scrolling="no"></iframe>
        </div>
    </div>
</section>

<div id="wechatPopup" class="wechat-popup">
    <div class="wechat-box">
        <p class="cn">æ‰«ç æ·»åŠ å¾®ä¿¡å’¨è¯¢é¢„è®¢</p>
        <p class="en hidden">Scan WeChat to Book</p>
        <img src="images/wechat-qr.jpg" alt="WeChat QR">
        <br><strong>Deso_89</strong><br>
        <button onclick="closeWechat()" style="background:#666; color:#fff; border:none; padding:10px 20px; border-radius:20px; margin-top:10px; cursor:pointer;">Close</button>
    </div>
</div>

<script src="main.js"></script>
<script>
    const sliders = {};
    function moveSlide(sliderId, direction) {
        if (!sliders[sliderId]) sliders[sliderId] = 0;
        const container = document.getElementById(sliderId);
        const track = container.querySelector('.slider-track');
        const slides = track.querySelectorAll('img');
        sliders[sliderId] += direction;
        if (sliders[sliderId] >= slides.length) sliders[sliderId] = 0;
        if (sliders[sliderId] < 0) sliders[sliderId] = slides.length - 1;
        track.style.transform = `translateX(${-sliders[sliderId] * 100}%)`;
    }

    // DATE CHECK LOGIC
    async function checkDate(inputId, resId) {
        const date = document.getElementById(inputId).value;
        const resultDiv = document.getElementById(resId);
        const scriptUrl = "https://script.google.com/macros/s/AKfycbyQIhNgnq1J5sK0SvW9TCGxOUHBMV773l1HN8Wrzzur24SfiqwWHCJsboiD8OfS3tUp/exec";

        if (!date) return alert("Please select a date!");

        resultDiv.style.display = "inline-block";
        resultDiv.innerHTML = "Checking... ğŸ”„";
        resultDiv.className = "status-tag";

        try {
            const response = await fetch(`${scriptUrl}?date=${date}`);
            const status = await response.text();

            if (status.includes("Full")) {
                resultDiv.innerHTML = "âŒ Busy / Full (å·²æ»¡)";
                resultDiv.className = "status-tag status-full";
            } else {
                resultDiv.innerHTML = "âœ… Available (æœ‰æˆ¿)";
                resultDiv.className = "status-tag status-available";
            }
        } catch (e) {
            resultDiv.innerHTML = "Error checking calendar. Please contact via WeChat.";
        }
    }
</script>
</body>
</html>
